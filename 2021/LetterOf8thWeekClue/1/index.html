<html>
<html lang="zh-Hans">
<head>
    <meta charset="UTF-8">
    <title>秘密空间线索1</title></head>
<body>
    <canvas id="canvas1" width="480" height="480"></canvas>   <!--注意canvas的大小，要联系地图大小设置-->
    <script>　　　　　//瓦片地图编辑器获取到的数据
        var map={
         "data":[1, 1,  1,  1,  1,  1,  1,  1,  1,  1, 1,  1,  1,
         		 1, 90, 1,  14, 0,  0,  15, 0,  0 , 0, 17, 0,  1,
         		 1, 0,  0 , 0,  1,  1,  0,  1,  0,  1, 1,  1,  1,
         		 1, 0 , 1,  0,  1,  0,  12, 0,  0,  0, 15, 0,  1,
         		 1, 0,  11, 0,  0 , 0,  1,  0,  0,  1, 1,  99, 1,
         		 1, 1,  1,  1,  1,  1,  1,  1,  1,  1, 1,  1,  1],
        "height":6,
         "width":13
        }
        var canvas = document.getElementById("canvas1");
        var ctx = canvas.getContext("2d");

        var W = 20;    //每一块地图块的宽
        var H = 20;    //每一块地图块的高
        var l = 0;
        var t = 0;
        for (var i=0; i<map.data.length; i++){    

            l = i%map.width*W;     //绘画每一块地图块的X坐标
            if (i%map.width==0&&i!=0){     //当达到一行是换行，注意第一行是0%0=0；所以应去除第一行换行的情况
                t+=H;              //绘画地图块的Y坐标
            }
            if (map.data[i]==1){     //当地图块的数据不为0时绘画地图块
                ctx.fillRect(l, t, W, H);
            }
            if (map.data[i]>1){     //当地图块的数据不为0时绘画地图块
            	if(map.data[i]>=90)
            	{
	            	ctx.font = 'bold 10px Arial';
	            	ctx.textAlign = 'center';
					ctx.textBaseline = 'middle';
					if(map.data[i]==90) ctx.fillText("起点", l+W/2, t+W/2, W);
					if(map.data[i]==99) ctx.fillText("终点", l+W/2, t+W/2, W);
            	}
            	else
            	{
	            	var num;
	            	if(map.data[i]==10) num = "0";
	            	else if(map.data[i]==11) num = "1";
	            	else if(map.data[i]==12) num = "2";
	            	else if(map.data[i]==13) num = "3";
	            	else if(map.data[i]==14) num = "4";
	            	else if(map.data[i]==15) num = "5";
	            	else if(map.data[i]==16) num = "6";
	            	else if(map.data[i]==17) num = "7";
	            	else if(map.data[i]==18) num = "8";
	            	else if(map.data[i]==19) num = "9";
	            	ctx.font = 'bold 20px Arial';
	            	ctx.textAlign = 'center';
					ctx.textBaseline = 'middle';
	                ctx.fillText(num, l+W/2, t+W/2, W);
	            }
            }    
        }
    </script>
</body>
</html>